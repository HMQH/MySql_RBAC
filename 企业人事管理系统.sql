/*
 Navicat Premium Dump SQL

 Source Server         : local
 Source Server Type    : MySQL
 Source Server Version : 80034 (8.0.34)
 Source Host           : localhost:3306
 Source Schema         : 企业人事管理系统

 Target Server Type    : MySQL
 Target Server Version : 80034 (8.0.34)
 File Encoding         : 65001

 Date: 29/04/2025 15:31:05
*/

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for 员工
-- ----------------------------
DROP TABLE IF EXISTS `员工`;
CREATE TABLE `员工`  (
  `员工ID` int NOT NULL AUTO_INCREMENT,
  `姓名` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `性别` enum('男','女') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `出生日期` date NULL DEFAULT NULL,
  `联系电话` varbinary(100) NULL DEFAULT NULL,
  `电子邮箱` varbinary(200) NULL DEFAULT NULL,
  `入职日期` date NOT NULL,
  `部门ID` int NULL DEFAULT NULL,
  `职位` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL,
  `状态` enum('在职','离职') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT '在职',
  PRIMARY KEY (`员工ID`) USING BTREE,
  INDEX `部门ID`(`部门ID` ASC) USING BTREE,
  CONSTRAINT `员工_ibfk_1` FOREIGN KEY (`部门ID`) REFERENCES `部门` (`部门ID`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 102 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of 员工
-- ----------------------------
INSERT INTO `员工` VALUES (1, '张伟', '男', '1985-03-12', 0x717545C911B2507610072CD472806488, 0x1FBBBC7DA90E6A3F2C791DD02046865B78109315E10D6ACFBB22528B54FA9C92, '2018-07-01', 1, '财务部经理', '在职');
INSERT INTO `员工` VALUES (2, '王芳', '女', '1990-05-23', 0xBA3D856A51A227592770AC9A37969547, 0x8115C8B4B8129407D2FD0977D7FF5A5878109315E10D6ACFBB22528B54FA9C92, '2019-01-15', 1, '财务专员', '在职');
INSERT INTO `员工` VALUES (3, '李娜', '女', '1992-11-07', 0xF12ADA60A70A839C8B8950957D066944, 0xCBC3F133F83B4FBF340E8F840858824164121CCFEAB99F368B1B67D8D9DA10B7, '2019-06-20', 1, '高级财务员', '在职');
INSERT INTO `员工` VALUES (4, '刘洋', '男', '1988-09-17', 0xF7842C0AF347223081764563398FB081, 0x3AD72279C9090BA383082668331CBC661ED38A92BF5E6B0B1C47A283B7068E66, '2018-10-10', 1, '财务专员', '在职');
INSERT INTO `员工` VALUES (5, '陈明', '男', '1987-02-28', 0x3E959188FCA12089A7AF8B31403552EE, 0xC9378399984D7460ED621D209D3722CA78109315E10D6ACFBB22528B54FA9C92, '2020-03-05', 1, '财务专员', '在职');
INSERT INTO `员工` VALUES (6, '赵霞', '女', '1991-07-19', 0x4112D9B11009ED87514E70E4AC2BA70C, 0x26D22E3EBBBAA77290D3C0D85DFAB4301ED38A92BF5E6B0B1C47A283B7068E66, '2020-05-15', 1, '财务专员', '在职');
INSERT INTO `员工` VALUES (7, '杨帆', '男', '1993-04-05', 0x32CB5AC1061E47936816D1E25CFFDE4E, 0x79E1599B5BAB88BAC15D48A454AFD57E1ED38A92BF5E6B0B1C47A283B7068E66, '2021-01-10', 1, '财务专员', '在职');
INSERT INTO `员工` VALUES (8, '周丽', '女', '1989-12-22', 0x58673C9BA5858D0883E68804B305530E, 0x2E5C9D529795F999DFD9BB9F4CA781C5ED60217139A4B99990FD346AEAD2DAAC, '2019-11-20', 1, '财务专员', '在职');
INSERT INTO `员工` VALUES (9, '吴强', '男', '1986-08-14', 0x7022869B95D830D7F7E8F4F1884F762F, 0xED52318257EF817B0751F566874E716A1ED38A92BF5E6B0B1C47A283B7068E66, '2018-09-01', 1, '财务专员', '在职');
INSERT INTO `员工` VALUES (10, '郑婷', '女', '1994-01-30', 0x9657070BC1926CE0604F7F5532BBB4A5, 0x0A3055DB9B8D0EFAB47CBEE137CBB3DD1AB5D4B3BFD022DD1A48CAA244945A66, '2021-04-12', 1, '财务专员', '在职');
INSERT INTO `员工` VALUES (11, '孙健', '男', '1990-06-16', 0xC2FB66627B31F20F9E149B9BFCEA98B8, 0x94AAC31572B523D62FEBBC3FE3F6244E1ED38A92BF5E6B0B1C47A283B7068E66, '2020-07-20', 1, '财务专员', '在职');
INSERT INTO `员工` VALUES (12, '马丽', '女', '1992-03-08', 0x38E4008CB919B012B381817B70B5D6AB, 0xFF63568E5B96CEFE1A70DC89D18626D064121CCFEAB99F368B1B67D8D9DA10B7, '2021-02-15', 1, '财务专员', '在职');
INSERT INTO `员工` VALUES (13, '胡明', '男', '1987-11-25', 0x1B269CF0DBA37F6ACE0E0E47A75C009A, 0x469A7852EEEA884472447892F8C1BE1DED60217139A4B99990FD346AEAD2DAAC, '2019-05-10', 1, '财务专员', '在职');
INSERT INTO `员工` VALUES (14, '朱琳', '女', '1993-09-03', 0x64C2F14279AA0392953524D8A5CE575F, 0x71F8E020CF70B82AC7ADD697E035E337ED60217139A4B99990FD346AEAD2DAAC, '2020-11-01', 1, '财务专员', '在职');
INSERT INTO `员工` VALUES (15, '徐刚', '男', '1988-04-19', 0x8C213DCEB8C1B96254C1E429100EE1C1, 0xC24EF7A1DD3C21BF5C0CF94D0C86F5C3ED60217139A4B99990FD346AEAD2DAAC, '2019-08-15', 1, '财务专员', '在职');
INSERT INTO `员工` VALUES (16, '沈莉', '女', '1984-07-21', 0xEFB2EF00DD473E53A169BC1227A57558, 0xF85579DC58B7F994F32A51ECA19BE590ED60217139A4B99990FD346AEAD2DAAC, '2017-10-01', 2, '人力资源部经理', '在职');
INSERT INTO `员工` VALUES (17, '韩涛', '男', '1989-02-14', 0xEAB51EB96FA9FD229FD0A2FAF35E7DBC, 0xCB83CC0701C50341B2EFE023C9F04F50ED60217139A4B99990FD346AEAD2DAAC, '2018-11-15', 2, '人力资源管理员', '在职');
INSERT INTO `员工` VALUES (18, '陈爽', '女', '1991-12-05', 0xBDEB9FDDF257DBCA10AA739D1F87062E, 0x3CECC852DD8BB13D2AD838B8107025061ED38A92BF5E6B0B1C47A283B7068E66, '2019-04-10', 2, '人力资源管理员', '在职');
INSERT INTO `员工` VALUES (19, '谢峰', '男', '1987-05-18', 0x48B5622EAFB925DA1671994B66498FCA, 0xD7CC728243FB0C0764E2A27A7F730BAD1ED38A92BF5E6B0B1C47A283B7068E66, '2020-01-20', 2, '招聘专员', '在职');
INSERT INTO `员工` VALUES (20, '邓丽', '女', '1993-08-27', 0x08B7B173A560C165D3A2079500B601AB, 0x2EC6FDB2A22C6A8045D553A224B08AABED60217139A4B99990FD346AEAD2DAAC, '2021-03-15', 2, '培训专员', '在职');
INSERT INTO `员工` VALUES (21, '萧雷', '男', '1986-10-09', 0x8C3601B8BAB7A83AB629CDA0915DF47B, 0xD61251AEEB00020F8C354A8A7E2157BD1ED38A92BF5E6B0B1C47A283B7068E66, '2018-05-25', 2, '人力资源管理员', '在职');
INSERT INTO `员工` VALUES (22, '唐婷', '女', '1990-01-11', 0xC1CBA3F6D87408C610167621F64170EE, 0x3C08925019987620A794D648B052771B78109315E10D6ACFBB22528B54FA9C92, '2019-07-05', 2, '人力资源管理员', '在职');
INSERT INTO `员工` VALUES (23, '冯刚', '男', '1985-06-23', 0xB518AED58C80EAEF7F90E7D2D235A31E, 0x823DCE565E47D8959A7BFBE92D78921778109315E10D6ACFBB22528B54FA9C92, '2017-12-10', 2, '薪酬专员', '在职');
INSERT INTO `员工` VALUES (24, '董娟', '女', '1992-09-14', 0xC5141F0BB985BE2522D0637A1EEF54AF, 0x01B7C17864B4FB49C446FE27F7E3EE3478109315E10D6ACFBB22528B54FA9C92, '2020-06-01', 2, '绩效专员', '在职');
INSERT INTO `员工` VALUES (25, '蒋军', '男', '1988-03-26', 0xC720BEE3CA559727C9CEA9C1C91DB91F, 0x1513839DE5618023A367D75F439E202878109315E10D6ACFBB22528B54FA9C92, '2019-09-15', 2, '人力资源管理员', '在职');
INSERT INTO `员工` VALUES (26, '余梅', '女', '1994-05-07', 0x4E90D698CD882281FECDB8229F8CB26D, 0xAC34CEC89E8AE4F9917660F3D2F216E8AFA6A3559F1CF68F2E1ECF2C8964E012, '2021-05-20', 2, '招聘专员', '在职');
INSERT INTO `员工` VALUES (27, '魏强', '男', '1987-11-19', 0x89716EA10E405E21A735398FF79A923E, 0xFBF1F9FC7CA1305116664018A72BF4C278109315E10D6ACFBB22528B54FA9C92, '2018-08-10', 2, '人力资源管理员', '在职');
INSERT INTO `员工` VALUES (28, '秦洁', '女', '1991-02-02', 0x2D0A2B3C11A1C2E72DD8FD0B486F853A, 0xD5B5D3F3596AF46BE730C6864B2F179EED60217139A4B99990FD346AEAD2DAAC, '2019-10-25', 2, '人力资源管理员', '在职');
INSERT INTO `员工` VALUES (29, '梁波', '男', '1986-04-13', 0xA418F53D11FA14076E9D4A2A9362C765, 0x43F49FB56AD32C47300A56A1C3777A461ED38A92BF5E6B0B1C47A283B7068E66, '2020-02-15', 2, '培训专员', '在职');
INSERT INTO `员工` VALUES (30, '郭琳', '女', '1993-07-24', 0x3E81CF965CDA0A0C5510E5BD36E60C28, 0xE02A17E96E1B07394D4ED6BCC99D1D32ED60217139A4B99990FD346AEAD2DAAC, '2021-01-05', 2, '人力资源管理员', '在职');
INSERT INTO `员工` VALUES (31, '范鹏', '男', '1983-09-15', 0x899F491ECE9131A09016BBDBCCF334C2, 0x922D364B539EE24D97B104BCE6C9EDE01ED38A92BF5E6B0B1C47A283B7068E66, '2016-08-01', 3, '技术部经理', '在职');
INSERT INTO `员工` VALUES (32, '金莉', '女', '1988-11-27', 0xC2C8B417D3495196829CE546DD8C84F0, 0x5F849A9478BB798BEE1E4B698DF1B714AFA6A3559F1CF68F2E1ECF2C8964E012, '2018-03-15', 3, '高级开发工程师', '在职');
INSERT INTO `员工` VALUES (33, '鲁明', '男', '1990-04-09', 0x8FBD8FDE485E27AF0E5A158FFB9721BC, 0x9BAFDDCB7011A701BAEF3A2F02F9F347ED60217139A4B99990FD346AEAD2DAAC, '2019-02-10', 3, '开发工程师', '在职');
INSERT INTO `员工` VALUES (34, '尹芳', '女', '1992-06-21', 0xA3179F63C00C864C3B32A18F54DA3429, 0x7A81034A84729488F60C069B63B9E7541ED38A92BF5E6B0B1C47A283B7068E66, '2020-04-20', 3, '开发工程师', '在职');
INSERT INTO `员工` VALUES (35, '石刚', '男', '1986-01-03', 0x6C2FA06125C93FAAD18AAF970DC1C9FB, 0x0E324F0093FBB47FC8A92756733877C11ED38A92BF5E6B0B1C47A283B7068E66, '2017-11-05', 3, '系统架构师', '在职');
INSERT INTO `员工` VALUES (36, '贺玲', '女', '1989-08-14', 0xC0645D9DAB5F7A3162CC8CB579085047, 0x4E2C2D4A22256969C7102340979E1B17ED60217139A4B99990FD346AEAD2DAAC, '2018-10-25', 3, '测试工程师', '在职');
INSERT INTO `员工` VALUES (37, '廖强', '男', '1993-03-26', 0xC30C8E13F231B24BF8148A2AFB37377D, 0x83B00199A8DB95004F868B8B34747FF81AB5D4B3BFD022DD1A48CAA244945A66, '2021-02-15', 3, '开发工程师', '在职');
INSERT INTO `员工` VALUES (38, '龚丽', '女', '1987-12-08', 0x90CE5574885291A368A4C244ACC3562F, 0x65F02F8BAB8DCE7F84E0EC53DC6AF892ED60217139A4B99990FD346AEAD2DAAC, '2019-05-10', 3, '数据分析师', '在职');
INSERT INTO `员工` VALUES (39, '邹勇', '男', '1984-05-19', 0xC2E4E22646C31EE835E37761F9F56EF7, 0x52A66E9AC0811F75991942992F79366D1ED38A92BF5E6B0B1C47A283B7068E66, '2017-07-01', 3, '高级开发工程师', '在职');
INSERT INTO `员工` VALUES (40, '丁敏', '女', '1991-10-31', 0x439DDD2A9D057443D2CC0F931D84B629, 0x3CFECAAE5F284C37DD5A7EFE02195A951ED38A92BF5E6B0B1C47A283B7068E66, '2020-01-15', 3, '开发工程师', '在职');
INSERT INTO `员工` VALUES (41, '江涛', '男', '1988-07-12', 0xA6B704ECF33381BB74268E1BB16A0D58, 0x5787484798C9443C52D63CC633CC812378109315E10D6ACFBB22528B54FA9C92, '2018-09-20', 3, '开发工程师', '在职');
INSERT INTO `员工` VALUES (42, '何娜', '女', '1993-01-24', 0x3B2CBCDF24DB174DCBF46BB56CDEA621, 0x743A76AAFCABFDE4365C797E256B947764121CCFEAB99F368B1B67D8D9DA10B7, '2020-08-10', 3, '测试工程师', '在职');
INSERT INTO `员工` VALUES (43, '吕刚', '男', '1986-09-05', 0xA26773CC2BBB8BD209180047FF3E73AB, 0x1A8102E5663472C0DAF1C3133B254682ED60217139A4B99990FD346AEAD2DAAC, '2017-12-15', 3, '产品经理', '在职');
INSERT INTO `员工` VALUES (44, '彭丽', '女', '1990-02-16', 0xCBA28E4959BF3244DB408425B1A5422A, 0x308EC824F5F40AD9D40119C8B8BB8E1DED60217139A4B99990FD346AEAD2DAAC, '2019-03-25', 3, '用户界面设计师', '在职');
INSERT INTO `员工` VALUES (45, '陶强', '男', '1985-11-28', 0x2334BE42E26CAE932EBD922C8F9DCFE4, 0x2CE7B5D4B093944E3C53E9A121C941CC78109315E10D6ACFBB22528B54FA9C92, '2016-10-01', 3, '数据库管理员', '在职');
INSERT INTO `员工` VALUES (46, '夏梅', '女', '1992-04-09', 0x1DCDE946BB79468F2BB036B288641DF5, 0xDCD97AD25800132A46A9FF7683DC8E90ED60217139A4B99990FD346AEAD2DAAC, '2020-05-15', 3, '开发工程师', '在职');
INSERT INTO `员工` VALUES (47, '程明', '男', '1987-06-20', 0x1636E3F4B3A4284FDB792A0EB8BE4BE8, 0xFA1549941BC98D935EF231F9E037A63C1AB5D4B3BFD022DD1A48CAA244945A66, '2018-02-10', 3, '高级开发工程师', '在职');
INSERT INTO `员工` VALUES (48, '傅玲', '女', '1994-03-01', 0x51350CDF207135C85C53F5400D9AB698, 0xBF085FE02324E517B657F8928A283B83ED60217139A4B99990FD346AEAD2DAAC, '2021-04-20', 3, '开发工程师', '在职');
INSERT INTO `员工` VALUES (49, '方刚', '男', '1989-08-12', 0x965CA5F6E674E9476AB0841FEFAAFFED, 0xED180ED48921CD5E0AA7B91C060A61D978109315E10D6ACFBB22528B54FA9C92, '2019-06-05', 3, '测试工程师', '在职');
INSERT INTO `员工` VALUES (50, '崔婷', '女', '1991-12-23', 0x95B82A882D0CF2C98B9FA26ACE210282, 0xC8B23F9934C7E9B18B5CD51A37454D771ED38A92BF5E6B0B1C47A283B7068E66, '2020-03-10', 3, '开发工程师', '在职');
INSERT INTO `员工` VALUES (51, '邱涛', '男', '1982-05-17', 0xDBB1F32A4B01AE35D2DEAB323550E418, 0xC84AF20C5BD7A8B97B9BE882893E114BED60217139A4B99990FD346AEAD2DAAC, '2015-09-01', 4, '市场部经理', '在职');
INSERT INTO `员工` VALUES (52, '史娟', '女', '1987-07-28', 0x21DFDD3C5180E01752B5C6A4FF9997E5, 0x409D9C246FB1C524DC184CE204A748FB1ED38A92BF5E6B0B1C47A283B7068E66, '2018-04-15', 4, '市场分析师', '在职');
INSERT INTO `员工` VALUES (53, '侯强', '男', '1989-10-09', 0x0A3E3C8515A4D58864F3527518573F65, 0x68BC7AB1B18CDEC6F4697A688DEDC06478109315E10D6ACFBB22528B54FA9C92, '2019-01-10', 4, '市场策划', '在职');
INSERT INTO `员工` VALUES (54, '白丽', '女', '1992-02-20', 0xD18C63A5BDCC2A000D62615422634BC8, 0x36AA22999465BE6990CE1A2183DC3F3BAFA6A3559F1CF68F2E1ECF2C8964E012, '2020-03-20', 4, '市场专员', '在职');
INSERT INTO `员工` VALUES (55, '孔明', '男', '1985-11-01', 0x953E36F3D7EED9F193685F143036F6B9, 0x042425B780BC85ED3FA011BF77A7B02278109315E10D6ACFBB22528B54FA9C92, '2017-06-05', 4, '品牌经理', '在职');
INSERT INTO `员工` VALUES (56, '曾芳', '女', '1988-04-12', 0x4361FD449A4ADE1EC4434CA93207EEA4, 0xE2DAD23B711E8D8C9EB1C14AFF06947478109315E10D6ACFBB22528B54FA9C92, '2018-08-25', 4, '市场专员', '在职');
INSERT INTO `员工` VALUES (57, '苏强', '男', '1993-09-23', 0xF1D39CC740A288603CF1F8F8F53D075C, 0x16031F115EAD9F0B79C86135D9A9E6AC1ED38A92BF5E6B0B1C47A283B7068E66, '2021-01-15', 4, '市场调研员', '在职');
INSERT INTO `员工` VALUES (58, '毕梅', '女', '1986-03-05', 0xEB5B4740687366B039F9DBF1AEBF9D38, 0xFC2BE4DAC183A19B4E108BB20DA5D046AFA6A3559F1CF68F2E1ECF2C8964E012, '2017-10-10', 4, '市场专员', '在职');
INSERT INTO `员工` VALUES (59, '田刚', '男', '1984-08-16', 0xDB47C45A7EBCB658130BA5AEC0B94160, 0xB6F0BE32BBEC6A0F3B471DC626AF5AA978109315E10D6ACFBB22528B54FA9C92, '2016-12-01', 4, '广告策划', '在职');
INSERT INTO `员工` VALUES (60, '姜丽', '女', '1990-12-27', 0xBF84A64A0352FE8471B421AD90352C49, 0x31FA3821C179D073A2036991B00927F31ED38A92BF5E6B0B1C47A283B7068E66, '2019-09-15', 4, '市场专员', '在职');
INSERT INTO `员工` VALUES (61, '戴强', '男', '1987-05-08', 0xFD4FDADEF33DA670E18CA1BE56F4DD0F, 0xDE8CFA2E90612504ECA241397BB271F578109315E10D6ACFBB22528B54FA9C92, '2018-07-20', 4, '市场分析师', '在职');
INSERT INTO `员工` VALUES (62, '宋芳', '女', '1993-02-19', 0x4BB410BAE6D37E358E657A1498B04AC6, 0x9B5E3AF3ACEC4ABC46A5A9679D2A193378109315E10D6ACFBB22528B54FA9C92, '2020-11-10', 4, '市场专员', '在职');
INSERT INTO `员工` VALUES (63, '严刚', '男', '1986-10-30', 0x269CD3AE91188A8EC2C02F677E0402C1, 0xAB18FBDE182DBE06847BE9F3E19AC3681ED38A92BF5E6B0B1C47A283B7068E66, '2017-05-15', 4, '媒体关系', '在职');
INSERT INTO `员工` VALUES (64, '韦丽', '女', '1989-06-11', 0x8B361DF25D64C3841853DB30D48FD308, 0xF9CFBB690492EDA9C981DE9B919F232DAFA6A3559F1CF68F2E1ECF2C8964E012, '2019-03-25', 4, '市场专员', '在职');
INSERT INTO `员工` VALUES (65, '贾明', '男', '1992-01-22', 0xE619D7EAEC6C52095E3097EEF9BF5BD9, 0x6173B898D9D85F7984804EF0151929981ED38A92BF5E6B0B1C47A283B7068E66, '2020-08-05', 4, '市场策划', '在职');
INSERT INTO `员工` VALUES (66, '伍强', '男', '1981-03-14', 0x228E77D6107549734346050A477458FC, 0xED52318257EF817B0751F566874E716A1ED38A92BF5E6B0B1C47A283B7068E66, '2014-10-01', 5, '销售部经理', '在职');
INSERT INTO `员工` VALUES (67, '孙丽', '女', '1986-05-25', 0x8FFE9B9142C2C39FBB5E3767AEABD27C, 0x66038C8B9C1BF7BF3C55FBFAADD77D7FAFA6A3559F1CF68F2E1ECF2C8964E012, '2017-02-15', 5, '销售主管', '在职');
INSERT INTO `员工` VALUES (68, '任刚', '男', '1988-08-06', 0x31FD46ED0BE876CC2139DF285631DB0F, 0xEA4A291F090B917065181BFDD95B3DB01ED38A92BF5E6B0B1C47A283B7068E66, '2018-05-10', 5, '高级销售代表', '在职');
INSERT INTO `员工` VALUES (69, '潘芳', '女', '1991-11-17', 0xB24949B62F9A25C943EC5EAEEE1C546B, 0x5D16C83482908AB391C45FDE80FB83331ED38A92BF5E6B0B1C47A283B7068E66, '2019-08-20', 5, '销售代表', '在职');
INSERT INTO `员工` VALUES (70, '卢明', '男', '1984-04-28', 0x82FDBBFD86BACF0BF62D4D02893362D6, 0x9BAFDDCB7011A701BAEF3A2F02F9F347ED60217139A4B99990FD346AEAD2DAAC, '2016-07-05', 5, '客户经理', '在职');
INSERT INTO `员工` VALUES (71, '袁娜', '女', '1987-09-09', 0xF477152657F1694A29E178CA88C635B0, 0xB573377AF70E3EA0EC6CA487E179F550ED60217139A4B99990FD346AEAD2DAAC, '2018-01-25', 5, '销售代表', '在职');
INSERT INTO `员工` VALUES (72, '沈强', '男', '1992-12-20', 0xA0B689AE8D31DFED7B324C38DF145211, 0xC3C113D191F9EAA4AF258ED5567174731AB5D4B3BFD022DD1A48CAA244945A66, '2020-04-15', 5, '销售代表', '在职');
INSERT INTO `员工` VALUES (73, '姚梅', '女', '1985-02-01', 0x89FA97205CF5C1540E85460F934BF875, 0x28EC6057C80D667C9E4E11E569E26E19ED60217139A4B99990FD346AEAD2DAAC, '2017-03-10', 5, '区域销售经理', '在职');
INSERT INTO `员工` VALUES (74, '宋刚', '男', '1983-07-12', 0x0BF9B11227A0A4272F028FFB89F487FC, 0xD4B126585360BCE57535D49E7283FE8978109315E10D6ACFBB22528B54FA9C92, '2015-11-01', 5, '高级销售代表', '在职');
INSERT INTO `员工` VALUES (75, '熊丽', '女', '1989-10-23', 0x69634C1BE45A05994F4B9048ECC295E0, 0x35A91421EDA26F96DEA835EBEC1646FA1ED38A92BF5E6B0B1C47A283B7068E66, '2019-02-15', 5, '销售代表', '在职');
INSERT INTO `员工` VALUES (76, '赖强', '男', '1986-01-04', 0xA572FA0C8BA07994D83740369B78333C, 0xD2FEAC78CA3550913902C7B3D83D21B878109315E10D6ACFBB22528B54FA9C92, '2017-09-20', 5, '销售代表', '在职');
INSERT INTO `员工` VALUES (77, '阎芳', '女', '1993-04-15', 0x9502A109CDCB46FAAE784847B732E4D8, 0x17BA18C7F13009B19DC4CD323435874E1ED38A92BF5E6B0B1C47A283B7068E66, '2020-07-10', 5, '客户经理', '在职');
INSERT INTO `员工` VALUES (78, '孟刚', '男', '1985-06-26', 0x117C65E2D1DA989CC75CF9C915EAF7EC, 0x26C0CEF40D0E352F87E9B2914E61B4C678109315E10D6ACFBB22528B54FA9C92, '2016-12-15', 5, '销售代表', '在职');
INSERT INTO `员工` VALUES (79, '席丽', '女', '1988-09-07', 0x69FA7F3F1ABE2CEE07CAE5E26D96DA53, 0x9E160C26F9E3F12200227E25C2F3726564121CCFEAB99F368B1B67D8D9DA10B7, '2018-04-25', 5, '销售代表', '在职');
INSERT INTO `员工` VALUES (80, '丁强', '男', '1991-12-18', 0x288CFAB95117936C497A02E081133309, 0xB1F1810259B3C70A64821424036708231AB5D4B3BFD022DD1A48CAA244945A66, '2019-10-05', 5, '销售代表', '在职');
INSERT INTO `员工` VALUES (81, '阮梅', '女', '1984-03-29', 0x6E545D3AEBC6A2E21B094AC9A156186D, 0xD397A869D342BA19439AF7CFEB8BFC661ED38A92BF5E6B0B1C47A283B7068E66, '2016-05-15', 5, '销售代表', '在职');
INSERT INTO `员工` VALUES (82, '柳刚', '男', '1987-08-10', 0xFF278BEF1651160690AEA944F84025DD, 0xD3749E5AF5445E659CAFE3DBEA8071FF1ED38A92BF5E6B0B1C47A283B7068E66, '2018-02-10', 5, '高级销售代表', '在职');
INSERT INTO `员工` VALUES (83, '阙丽', '女', '1990-11-21', 0xBE2A7B8FB6264693D76ACE0DC32A8F50, 0x9B2E3000B827B7CB55762763C2226337AFA6A3559F1CF68F2E1ECF2C8964E012, '2019-05-20', 5, '销售代表', '在职');
INSERT INTO `员工` VALUES (84, '卓强', '男', '1993-02-02', 0xB52804162E324CA758B0D5E805BA8678, 0x64F8A98FB3C9138783C3D48D19DC49B81AB5D4B3BFD022DD1A48CAA244945A66, '2020-09-15', 5, '销售代表', '在职');
INSERT INTO `员工` VALUES (85, '章芳', '女', '1986-05-13', 0xEEB914C1348221BA7C868B78F07460A7, 0x491E8718F502782C480245C10F0807A61AB5D4B3BFD022DD1A48CAA244945A66, '2017-07-10', 5, '销售代表', '在职');
INSERT INTO `员工` VALUES (86, '苏明', '男', '1980-01-24', 0x0C67F84A1F5D4EDC5B3AB427CE6CAF45, 0x1EB8C8A0BC659DD88B7A280DF2B23CC0ED60217139A4B99990FD346AEAD2DAAC, '2013-11-01', 6, '行政部经理', '在职');
INSERT INTO `员工` VALUES (87, '黎娜', '女', '1985-04-05', 0xB377E43FDCDC6E30FF8F0C18EA13E9AE, 0xCBC3F133F83B4FBF340E8F840858824164121CCFEAB99F368B1B67D8D9DA10B7, '2016-01-15', 6, '行政主管', '在职');
INSERT INTO `员工` VALUES (88, '水刚', '男', '1987-07-16', 0x9A54D7672D7581F4DFCF27E12E3DBAA2, 0x56B1C318A451F00D012A8455C2F419A278109315E10D6ACFBB22528B54FA9C92, '2017-04-10', 6, '办公室主任', '在职');
INSERT INTO `员工` VALUES (89, '蔡芳', '女', '1990-10-27', 0x4FF6303D6AC098E0593B257242A428E9, 0x723A8297BD48BDD3ECB0FF9F352B715E1ED38A92BF5E6B0B1C47A283B7068E66, '2019-07-20', 6, '行政助理', '在职');
INSERT INTO `员工` VALUES (90, '雷明', '男', '1983-02-08', 0xC872C421AF24A686AEB2C13A0AA096A7, 0xEC4DEFAC502480C732A1234B929BD0671ED38A92BF5E6B0B1C47A283B7068E66, '2015-06-05', 6, '后勤主管', '在职');
INSERT INTO `员工` VALUES (91, '傅娜', '女', '1986-05-19', 0x5B1AECA444E11117FAFFF9C34FD76879, 0x4D66A9E79E1F1902C313C397DE8D0F7C64121CCFEAB99F368B1B67D8D9DA10B7, '2017-09-25', 6, '前台接待', '在职');
INSERT INTO `员工` VALUES (92, '于强', '男', '1991-08-30', 0x99C578F8BBE386BDFD2D091C05DA8832, 0x5DCFAE2883F78E801E05656B2B88D8271ED38A92BF5E6B0B1C47A283B7068E66, '2019-12-15', 6, '行政专员', '在职');
INSERT INTO `员工` VALUES (93, '曲梅', '女', '1984-11-10', 0x4B42550C9D8F13B2C3F964FE9703A4C1, 0xE364188B00639A7C50416A99A08AFC06AFA6A3559F1CF68F2E1ECF2C8964E012, '2016-03-10', 6, '档案管理员', '在职');
INSERT INTO `员工` VALUES (94, '金刚', '男', '1982-03-21', 0xA49F7ACF6B307829FFDA64E2B365A8D2, 0x90666A8A905F7D59872EF1AF79D82B741ED38A92BF5E6B0B1C47A283B7068E66, '2014-08-01', 6, '采购专员', '在职');
INSERT INTO `员工` VALUES (95, '汤丽', '女', '1988-06-01', 0x7F1312558974050166037252266612DE, 0x9EF3F868D05ED1B08D8BE1E3DB4058A9ED60217139A4B99990FD346AEAD2DAAC, '2018-10-15', 6, '行政助理', '在职');
INSERT INTO `员工` VALUES (96, '安强', '男', '1985-09-12', 0x4DB37B554C92C4300B7C05D971600ED8, 0xEFBFC86049A9BCDAD1A0E5B17BDBBECD1ED38A92BF5E6B0B1C47A283B7068E66, '2016-12-20', 6, '安保主管', '在职');
INSERT INTO `员工` VALUES (97, '乔芳', '女', '1992-12-23', 0xDA2EB18622A161EFA2A38D3E2117AF24, 0xC9D83B9E86B211BC5C2EA3A165D1628978109315E10D6ACFBB22528B54FA9C92, '2020-03-10', 6, '行政专员', '在职');
INSERT INTO `员工` VALUES (98, '仇刚', '男', '1984-03-05', 0xFBD524FB91D143645617BD41219276EA, 0x4EB24328D7F122612A4F4AECA43A265178109315E10D6ACFBB22528B54FA9C92, '2015-09-15', 6, '行政专员', '在职');
INSERT INTO `员工` VALUES (99, '池丽', '女', '1987-06-16', 0xEE24F6280C537F8DA4A6A9BB08B23248, 0x9C6A12CB3BE49D92CA2520E2A1746122AFA6A3559F1CF68F2E1ECF2C8964E012, '2017-11-25', 6, '行政助理', '在职');
INSERT INTO `员工` VALUES (100, '童明', '男', '1990-09-27', 0xEA0935B4360588122F9EE30F0DF837FF, 0x1E2F7FB4C0154BE01672C1E87AC2A9FD78109315E10D6ACFBB22528B54FA9C92, '2019-04-05', 6, '行政专员', '在职');
INSERT INTO `员工` VALUES (101, 'HR测试员工', '女', '1996-02-02', 0x17D983FF8415D2B3E26B9C60BF638A41, 0x62F46C55AADD60A97A091BCE1C3536D3ED60217139A4B99990FD346AEAD2DAAC, '2025-04-02', 2, '测试职位', '在职');

-- ----------------------------
-- Table structure for 员工数据备份
-- ----------------------------
DROP TABLE IF EXISTS `员工数据备份`;
CREATE TABLE `员工数据备份`  (
  `员工ID` int NOT NULL,
  `联系电话` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL,
  `电子邮箱` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL,
  PRIMARY KEY (`员工ID`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of 员工数据备份
-- ----------------------------
INSERT INTO `员工数据备份` VALUES (1, '13801234001', 'zhangwei@example.com');
INSERT INTO `员工数据备份` VALUES (2, '13801234002', 'wangfang@example.com');
INSERT INTO `员工数据备份` VALUES (3, '13801234003', 'lina@example.com');
INSERT INTO `员工数据备份` VALUES (4, '13801234004', 'liuyang@example.com');
INSERT INTO `员工数据备份` VALUES (5, '13900001234', 'chenming@example.com');
INSERT INTO `员工数据备份` VALUES (6, '13801234006', 'zhaoxia@example.com');
INSERT INTO `员工数据备份` VALUES (7, '13801234007', 'yangfan@example.com');
INSERT INTO `员工数据备份` VALUES (8, '13801234008', 'zhouli@example.com');
INSERT INTO `员工数据备份` VALUES (9, '13801234009', 'wuqiang@example.com');
INSERT INTO `员工数据备份` VALUES (10, '13801234010', 'zhengting@example.com');
INSERT INTO `员工数据备份` VALUES (11, '13801234011', 'sunjian@example.com');
INSERT INTO `员工数据备份` VALUES (12, '13801234012', 'mali@example.com');
INSERT INTO `员工数据备份` VALUES (13, '13801234013', 'huming@example.com');
INSERT INTO `员工数据备份` VALUES (14, '13801234014', 'zhulin@example.com');
INSERT INTO `员工数据备份` VALUES (15, '13801234015', 'xugang@example.com');
INSERT INTO `员工数据备份` VALUES (16, '13801234016', 'shenli@example.com');
INSERT INTO `员工数据备份` VALUES (17, '13801234017', 'hantao@example.com');
INSERT INTO `员工数据备份` VALUES (18, '13801234018', 'caoying@example.com');
INSERT INTO `员工数据备份` VALUES (19, '13801234019', 'xiefeng@example.com');
INSERT INTO `员工数据备份` VALUES (20, '13900000002', 'dengli@example.com');
INSERT INTO `员工数据备份` VALUES (21, '13801234021', 'xiaolei@example.com');
INSERT INTO `员工数据备份` VALUES (22, '13801234022', 'tangting@example.com');
INSERT INTO `员工数据备份` VALUES (23, '13801234023', 'fenggang@example.com');
INSERT INTO `员工数据备份` VALUES (24, '13801234024', 'dongjuan@example.com');
INSERT INTO `员工数据备份` VALUES (25, '13801234025', 'jiangjun@example.com');
INSERT INTO `员工数据备份` VALUES (26, '13801234026', 'yumei@example.com');
INSERT INTO `员工数据备份` VALUES (27, '13801234027', 'weiqiang@example.com');
INSERT INTO `员工数据备份` VALUES (28, '13801234028', 'qinjie@example.com');
INSERT INTO `员工数据备份` VALUES (29, '13801234029', 'liangbo@example.com');
INSERT INTO `员工数据备份` VALUES (30, '13801234030', 'guolin@example.com');
INSERT INTO `员工数据备份` VALUES (31, '13801234031', 'fanpeng@example.com');
INSERT INTO `员工数据备份` VALUES (32, '13801234032', 'jinli@example.com');
INSERT INTO `员工数据备份` VALUES (33, '13801234033', 'luming@example.com');
INSERT INTO `员工数据备份` VALUES (34, '13801234034', 'yinfang@example.com');
INSERT INTO `员工数据备份` VALUES (35, '13801234035', 'shigang@example.com');
INSERT INTO `员工数据备份` VALUES (36, '13801234036', 'heling@example.com');
INSERT INTO `员工数据备份` VALUES (37, '13801234037', 'liaoqiang@example.com');
INSERT INTO `员工数据备份` VALUES (38, '13801234038', 'gongli@example.com');
INSERT INTO `员工数据备份` VALUES (39, '13801234039', 'zouyong@example.com');
INSERT INTO `员工数据备份` VALUES (40, '13801234040', 'dingmin@example.com');
INSERT INTO `员工数据备份` VALUES (41, '13801234041', 'jiangtao@example.com');
INSERT INTO `员工数据备份` VALUES (42, '13801234042', 'hena@example.com');
INSERT INTO `员工数据备份` VALUES (43, '13801234043', 'lvgang@example.com');
INSERT INTO `员工数据备份` VALUES (44, '13801234044', 'pengli@example.com');
INSERT INTO `员工数据备份` VALUES (45, '13801234045', 'taoqiang@example.com');
INSERT INTO `员工数据备份` VALUES (46, '13801234046', 'xiamei@example.com');
INSERT INTO `员工数据备份` VALUES (47, '13801234047', 'chengming@example.com');
INSERT INTO `员工数据备份` VALUES (48, '13801234048', 'fuling@example.com');
INSERT INTO `员工数据备份` VALUES (49, '13801234049', 'fanggang@example.com');
INSERT INTO `员工数据备份` VALUES (50, '13801234050', 'cuiting@example.com');
INSERT INTO `员工数据备份` VALUES (51, '13801234051', 'qiutao@example.com');
INSERT INTO `员工数据备份` VALUES (52, '13801234052', 'shijuan@example.com');
INSERT INTO `员工数据备份` VALUES (53, '13801234053', 'houqiang@example.com');
INSERT INTO `员工数据备份` VALUES (54, '13801234054', 'baili@example.com');
INSERT INTO `员工数据备份` VALUES (55, '13801234055', 'kongming@example.com');
INSERT INTO `员工数据备份` VALUES (56, '13801234056', 'zengfang@example.com');
INSERT INTO `员工数据备份` VALUES (57, '13801234057', 'suqiang@example.com');
INSERT INTO `员工数据备份` VALUES (58, '13801234058', 'bimei@example.com');
INSERT INTO `员工数据备份` VALUES (59, '13801234059', 'tiangang@example.com');
INSERT INTO `员工数据备份` VALUES (60, '13801234060', 'jiangli@example.com');
INSERT INTO `员工数据备份` VALUES (61, '13801234061', 'daiqiang@example.com');
INSERT INTO `员工数据备份` VALUES (62, '13801234062', 'songfang@example.com');
INSERT INTO `员工数据备份` VALUES (63, '13801234063', 'yangang@example.com');
INSERT INTO `员工数据备份` VALUES (64, '13801234064', 'weili@example.com');
INSERT INTO `员工数据备份` VALUES (65, '13801234065', 'jiaming@example.com');
INSERT INTO `员工数据备份` VALUES (66, '13801234066', 'wuqiang@example.com');
INSERT INTO `员工数据备份` VALUES (67, '13801234067', 'sunli@example.com');
INSERT INTO `员工数据备份` VALUES (68, '13801234068', 'rengang@example.com');
INSERT INTO `员工数据备份` VALUES (69, '13801234069', 'panfang@example.com');
INSERT INTO `员工数据备份` VALUES (70, '13801234070', 'luming@example.com');
INSERT INTO `员工数据备份` VALUES (71, '13801234071', 'yuanna@example.com');
INSERT INTO `员工数据备份` VALUES (72, '13801234072', 'shenqiang@example.com');
INSERT INTO `员工数据备份` VALUES (73, '13801234073', 'yaomei@example.com');
INSERT INTO `员工数据备份` VALUES (74, '13801234074', 'songgang@example.com');
INSERT INTO `员工数据备份` VALUES (75, '13801234075', 'xiongli@example.com');
INSERT INTO `员工数据备份` VALUES (76, '13801234076', 'laiqiang@example.com');
INSERT INTO `员工数据备份` VALUES (77, '13801234077', 'yanfang@example.com');
INSERT INTO `员工数据备份` VALUES (78, '13801234078', 'menggang@example.com');
INSERT INTO `员工数据备份` VALUES (79, '13801234079', 'xili@example.com');
INSERT INTO `员工数据备份` VALUES (80, '13801234080', 'dingqiang@example.com');
INSERT INTO `员工数据备份` VALUES (81, '13801234081', 'ruanmei@example.com');
INSERT INTO `员工数据备份` VALUES (82, '13801234082', 'liugang@example.com');
INSERT INTO `员工数据备份` VALUES (83, '13801234083', 'queli@example.com');
INSERT INTO `员工数据备份` VALUES (84, '13801234084', 'zhuoqiang@example.com');
INSERT INTO `员工数据备份` VALUES (85, '13801234085', 'zhangfang@example.com');
INSERT INTO `员工数据备份` VALUES (86, '13801234086', 'suming@example.com');
INSERT INTO `员工数据备份` VALUES (87, '13801234087', 'lina@example.com');
INSERT INTO `员工数据备份` VALUES (88, '13801234088', 'shuigang@example.com');
INSERT INTO `员工数据备份` VALUES (89, '13801234089', 'caifang@example.com');
INSERT INTO `员工数据备份` VALUES (90, '13801234090', 'leiming@example.com');
INSERT INTO `员工数据备份` VALUES (91, '13801234091', 'funa@example.com');
INSERT INTO `员工数据备份` VALUES (92, '13801234092', 'yuqiang@example.com');
INSERT INTO `员工数据备份` VALUES (93, '13801234093', 'qumei@example.com');
INSERT INTO `员工数据备份` VALUES (94, '13801234094', 'jingang@example.com');
INSERT INTO `员工数据备份` VALUES (95, '13801234095', 'tangli@example.com');
INSERT INTO `员工数据备份` VALUES (96, '13801234096', 'anqiang@example.com');
INSERT INTO `员工数据备份` VALUES (97, '13801234097', 'qiaofang@example.com');
INSERT INTO `员工数据备份` VALUES (98, '13801234098', 'chougang@example.com');
INSERT INTO `员工数据备份` VALUES (99, '13801234099', 'chili@example.com');
INSERT INTO `员工数据备份` VALUES (100, '13801234100', 'tongming@example.com');
INSERT INTO `员工数据备份` VALUES (101, '13800000001', 'hrtest@example.com');

-- ----------------------------
-- Table structure for 用户
-- ----------------------------
DROP TABLE IF EXISTS `用户`;
CREATE TABLE `用户`  (
  `用户ID` int NOT NULL AUTO_INCREMENT,
  `用户名` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `密码` varbinary(256) NULL DEFAULT NULL,
  `员工ID` int NOT NULL,
  `账户状态` enum('激活','禁用') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT '激活',
  `上次登录时间` datetime NULL DEFAULT NULL,
  PRIMARY KEY (`用户ID`) USING BTREE,
  UNIQUE INDEX `用户名`(`用户名` ASC) USING BTREE,
  INDEX `员工ID`(`员工ID` ASC) USING BTREE,
  CONSTRAINT `用户_ibfk_1` FOREIGN KEY (`员工ID`) REFERENCES `员工` (`员工ID`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 39 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of 用户
-- ----------------------------
INSERT INTO `用户` VALUES (1, 'admin', 0xBEA94D5D2E44DE8985735289E08ACDA6, 1, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (2, '财务部_manager', 0xE5B94063DCC62A705797AD667607C15C, 1, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (3, '人力资源部_manager', 0xE5B94063DCC62A705797AD667607C15C, 16, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (4, '技术部_manager', 0xE5B94063DCC62A705797AD667607C15C, 31, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (5, '市场部_manager', 0xE5B94063DCC62A705797AD667607C15C, 51, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (6, '销售部_manager', 0xE5B94063DCC62A705797AD667607C15C, 66, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (7, '行政部_manager', 0xE5B94063DCC62A705797AD667607C15C, 86, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (9, 'finance_officer_2', 0x5395B54B136FBAFEF402C82018714431, 2, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (10, 'finance_officer_3', 0x5395B54B136FBAFEF402C82018714431, 3, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (11, 'finance_officer_4', 0x5395B54B136FBAFEF402C82018714431, 4, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (12, 'finance_officer_5', 0x5395B54B136FBAFEF402C82018714431, 5, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (13, 'finance_officer_6', 0x5395B54B136FBAFEF402C82018714431, 6, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (14, 'finance_officer_7', 0x5395B54B136FBAFEF402C82018714431, 7, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (15, 'finance_officer_8', 0x5395B54B136FBAFEF402C82018714431, 8, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (16, 'finance_officer_9', 0x5395B54B136FBAFEF402C82018714431, 9, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (17, 'finance_officer_10', 0x5395B54B136FBAFEF402C82018714431, 10, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (18, 'finance_officer_11', 0x5395B54B136FBAFEF402C82018714431, 11, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (19, 'finance_officer_12', 0x5395B54B136FBAFEF402C82018714431, 12, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (20, 'finance_officer_13', 0x5395B54B136FBAFEF402C82018714431, 13, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (21, 'finance_officer_14', 0x5395B54B136FBAFEF402C82018714431, 14, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (22, 'finance_officer_15', 0x5395B54B136FBAFEF402C82018714431, 15, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (24, 'hr_admin_17', 0xBD1D7DD83387790F6863CE6934D8DE51, 17, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (25, 'hr_admin_18', 0xBD1D7DD83387790F6863CE6934D8DE51, 18, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (26, 'hr_admin_21', 0xBD1D7DD83387790F6863CE6934D8DE51, 21, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (27, 'hr_admin_22', 0xBD1D7DD83387790F6863CE6934D8DE51, 22, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (28, 'hr_admin_25', 0xBD1D7DD83387790F6863CE6934D8DE51, 25, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (29, 'hr_admin_27', 0xBD1D7DD83387790F6863CE6934D8DE51, 27, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (30, 'hr_admin_28', 0xBD1D7DD83387790F6863CE6934D8DE51, 28, '激活', '2025-04-28 20:13:04');
INSERT INTO `用户` VALUES (31, 'hr_admin_30', 0xBD1D7DD83387790F6863CE6934D8DE51, 30, '激活', '2025-04-28 20:13:04');

-- ----------------------------
-- Table structure for 用户角色
-- ----------------------------
DROP TABLE IF EXISTS `用户角色`;
CREATE TABLE `用户角色`  (
  `ID` int NOT NULL AUTO_INCREMENT,
  `用户ID` int NOT NULL,
  `角色ID` int NOT NULL,
  PRIMARY KEY (`ID`) USING BTREE,
  INDEX `用户ID`(`用户ID` ASC) USING BTREE,
  INDEX `角色ID`(`角色ID` ASC) USING BTREE,
  CONSTRAINT `用户角色_ibfk_1` FOREIGN KEY (`用户ID`) REFERENCES `用户` (`用户ID`) ON DELETE RESTRICT ON UPDATE RESTRICT,
  CONSTRAINT `用户角色_ibfk_2` FOREIGN KEY (`角色ID`) REFERENCES `角色` (`角色ID`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 39 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of 用户角色
-- ----------------------------
INSERT INTO `用户角色` VALUES (1, 1, 1);
INSERT INTO `用户角色` VALUES (2, 2, 3);
INSERT INTO `用户角色` VALUES (3, 3, 3);
INSERT INTO `用户角色` VALUES (4, 4, 3);
INSERT INTO `用户角色` VALUES (5, 5, 3);
INSERT INTO `用户角色` VALUES (6, 6, 3);
INSERT INTO `用户角色` VALUES (7, 7, 3);
INSERT INTO `用户角色` VALUES (9, 9, 4);
INSERT INTO `用户角色` VALUES (10, 10, 4);
INSERT INTO `用户角色` VALUES (11, 11, 4);
INSERT INTO `用户角色` VALUES (12, 12, 4);
INSERT INTO `用户角色` VALUES (13, 13, 4);
INSERT INTO `用户角色` VALUES (14, 14, 4);
INSERT INTO `用户角色` VALUES (15, 15, 4);
INSERT INTO `用户角色` VALUES (16, 16, 4);
INSERT INTO `用户角色` VALUES (17, 17, 4);
INSERT INTO `用户角色` VALUES (18, 18, 4);
INSERT INTO `用户角色` VALUES (19, 19, 4);
INSERT INTO `用户角色` VALUES (20, 20, 4);
INSERT INTO `用户角色` VALUES (21, 21, 4);
INSERT INTO `用户角色` VALUES (22, 22, 4);
INSERT INTO `用户角色` VALUES (24, 24, 2);
INSERT INTO `用户角色` VALUES (25, 25, 2);
INSERT INTO `用户角色` VALUES (26, 26, 2);
INSERT INTO `用户角色` VALUES (27, 27, 2);
INSERT INTO `用户角色` VALUES (28, 28, 2);
INSERT INTO `用户角色` VALUES (29, 29, 2);
INSERT INTO `用户角色` VALUES (30, 30, 2);
INSERT INTO `用户角色` VALUES (31, 31, 2);

-- ----------------------------
-- Table structure for 系统密钥
-- ----------------------------
DROP TABLE IF EXISTS `系统密钥`;
CREATE TABLE `系统密钥`  (
  `密钥ID` int NOT NULL AUTO_INCREMENT,
  `密钥名称` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `密钥值` varbinary(256) NOT NULL,
  `创建时间` datetime NULL DEFAULT CURRENT_TIMESTAMP,
  `状态` enum('激活','禁用') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT '激活',
  PRIMARY KEY (`密钥ID`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 3 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of 系统密钥
-- ----------------------------
INSERT INTO `系统密钥` VALUES (1, 'PASSWORD_KEY', 0xCC6C6D4389348AAA9A822C3F050BD8D86188566EF93A139F7EEA0A9BB1D6CE21, '2025-04-28 21:43:13', '激活');
INSERT INTO `系统密钥` VALUES (2, 'SENSITIVE_DATA_KEY', 0x2D547803406095742CCA00020720232A945BE25705EE890E9648E9334F431FD4, '2025-04-28 21:56:43', '激活');

-- ----------------------------
-- Table structure for 薪资
-- ----------------------------
DROP TABLE IF EXISTS `薪资`;
CREATE TABLE `薪资`  (
  `薪资ID` int NOT NULL AUTO_INCREMENT,
  `员工ID` int NOT NULL,
  `基本工资` decimal(10, 2) NOT NULL,
  `绩效奖金` decimal(10, 2) NULL DEFAULT 0.00,
  `福利补贴` decimal(10, 2) NULL DEFAULT 0.00,
  `社保扣除` decimal(10, 2) NULL DEFAULT 0.00,
  `个税扣除` decimal(10, 2) NULL DEFAULT 0.00,
  `实发金额` decimal(10, 2) GENERATED ALWAYS AS (((((`基本工资` + `绩效奖金`) + `福利补贴`) - `社保扣除`) - `个税扣除`)) STORED NULL,
  `发放年月` date NOT NULL,
  `发放状态` enum('已发放','未发放') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT '未发放',
  PRIMARY KEY (`薪资ID`) USING BTREE,
  INDEX `员工ID`(`员工ID` ASC) USING BTREE,
  CONSTRAINT `薪资_ibfk_1` FOREIGN KEY (`员工ID`) REFERENCES `员工` (`员工ID`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 101 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of 薪资
-- ----------------------------
INSERT INTO `薪资` VALUES (1, 1, 16498.00, 3970.00, 2527.00, 2591.00, 2329.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (2, 2, 8197.00, 1404.00, 1117.00, 1796.00, 671.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (3, 3, 9786.00, 1600.00, 1035.00, 1632.00, 596.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (4, 4, 8563.00, 1358.00, 1196.00, 1787.00, 783.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (5, 5, 9708.00, 1345.00, 1298.00, 1807.00, 701.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (6, 6, 8553.00, 1296.00, 1011.00, 1899.00, 778.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (7, 7, 9288.00, 1350.00, 1127.00, 1888.00, 515.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (8, 8, 8726.00, 1531.00, 1117.00, 1652.00, 553.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (9, 9, 8740.00, 1249.00, 1223.00, 1690.00, 549.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (10, 10, 9852.00, 1105.00, 1441.00, 1605.00, 633.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (11, 11, 8339.00, 1409.00, 1026.00, 1817.00, 641.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (12, 12, 8353.00, 1377.00, 1415.00, 1820.00, 556.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (13, 13, 9453.00, 1059.00, 1094.00, 1816.00, 511.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (14, 14, 8061.00, 1029.00, 1047.00, 1708.00, 658.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (15, 15, 9099.00, 1133.00, 1091.00, 1724.00, 659.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (16, 16, 17908.80, 3920.00, 2067.00, 2977.00, 2576.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (17, 17, 8029.00, 1276.00, 1341.00, 1712.00, 750.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (18, 18, 8084.00, 1567.00, 1209.00, 1890.00, 676.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (19, 19, 8058.00, 1307.00, 1415.00, 1601.00, 660.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (20, 20, 9310.00, 1538.00, 1198.00, 1890.00, 693.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (21, 21, 8647.00, 1546.00, 1222.00, 1653.00, 667.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (22, 22, 8503.00, 1468.00, 1085.00, 1630.00, 799.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (23, 23, 9353.00, 1315.00, 1470.00, 1755.00, 732.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (24, 24, 8638.00, 1215.00, 1196.00, 1645.00, 672.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (25, 25, 8855.00, 1328.00, 1386.00, 1789.00, 749.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (26, 26, 8541.00, 1685.00, 1236.00, 1838.00, 667.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (27, 27, 8815.00, 1289.00, 1292.00, 1852.00, 636.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (28, 28, 9484.00, 1281.00, 1264.00, 1777.00, 611.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (29, 29, 8166.00, 1240.00, 1126.00, 1708.00, 515.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (30, 30, 8353.00, 1580.00, 1048.00, 1693.00, 580.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (31, 31, 17035.00, 3458.00, 2923.00, 2965.00, 2885.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (32, 32, 11268.00, 2014.00, 1334.00, 1839.00, 1293.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (33, 33, 9073.00, 2000.00, 1008.00, 1873.00, 652.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (34, 34, 9613.00, 1405.00, 1057.00, 1616.00, 779.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (35, 35, 8993.00, 1547.00, 1466.00, 1782.00, 572.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (36, 36, 8772.00, 1164.00, 1436.00, 1822.00, 527.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (37, 37, 8469.00, 1717.00, 1390.00, 1664.00, 719.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (38, 38, 8026.00, 1696.00, 1157.00, 1888.00, 761.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (39, 39, 10927.00, 2205.00, 1069.00, 1772.00, 1031.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (40, 40, 9175.00, 1440.00, 1494.00, 1688.00, 650.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (41, 41, 9245.00, 1489.00, 1096.00, 1637.00, 516.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (42, 42, 9784.00, 1238.00, 1408.00, 1656.00, 645.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (43, 43, 19315.00, 4722.00, 2717.00, 2502.00, 2869.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (44, 44, 8670.00, 1052.00, 1161.00, 1725.00, 538.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (45, 45, 8757.00, 1409.00, 1211.00, 1774.00, 692.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (46, 46, 8914.00, 1291.00, 1223.00, 1643.00, 613.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (47, 47, 10933.00, 1693.00, 1283.00, 1675.00, 1081.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (48, 48, 8112.00, 1473.00, 1396.00, 1657.00, 670.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (49, 49, 8559.00, 1550.00, 1301.00, 1883.00, 776.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (50, 50, 9548.00, 1083.00, 1100.00, 1806.00, 752.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (51, 51, 15699.00, 3352.00, 2462.00, 2890.00, 2521.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (52, 52, 8524.00, 1598.00, 1476.00, 1755.00, 721.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (53, 53, 8267.00, 1363.00, 1434.00, 1894.00, 589.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (54, 54, 9090.00, 1668.00, 1269.00, 1657.00, 600.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (55, 55, 15516.00, 4022.00, 2247.00, 2851.00, 2774.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (56, 56, 9523.00, 1388.00, 1072.00, 1679.00, 767.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (57, 57, 9319.00, 1500.00, 1073.00, 1857.00, 757.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (58, 58, 9414.00, 1770.00, 1348.00, 1778.00, 765.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (59, 59, 9291.00, 1454.00, 1453.00, 1848.00, 624.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (60, 60, 9185.00, 1575.00, 1409.00, 1880.00, 567.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (61, 61, 8638.00, 1734.00, 1316.00, 1723.00, 546.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (62, 62, 9076.00, 1183.00, 1266.00, 1893.00, 587.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (63, 63, 9056.00, 1610.00, 1114.00, 1857.00, 682.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (64, 64, 8934.00, 1406.00, 1069.00, 1651.00, 633.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (65, 65, 9412.00, 1156.00, 1430.00, 1814.00, 799.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (66, 66, 19244.00, 3491.00, 2681.00, 2834.00, 2305.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (67, 67, 13552.00, 3006.00, 2141.00, 2398.00, 1662.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (68, 68, 11798.00, 2262.00, 1056.00, 1683.00, 828.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (69, 69, 8896.00, 1055.00, 1001.00, 1843.00, 511.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (70, 70, 18838.00, 4439.00, 2295.00, 2658.00, 2695.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (71, 71, 9060.00, 1450.00, 1113.00, 1732.00, 660.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (72, 72, 8698.00, 1110.00, 1321.00, 1840.00, 523.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (73, 73, 19921.00, 4377.00, 2490.00, 2692.00, 2457.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (74, 74, 10259.00, 1777.00, 1498.00, 1646.00, 1190.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (75, 75, 8881.00, 1689.00, 1493.00, 1704.00, 735.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (76, 76, 9768.00, 1049.00, 1328.00, 1629.00, 656.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (77, 77, 16544.00, 4964.00, 2984.00, 2987.00, 2922.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (78, 78, 9377.00, 1540.00, 1156.00, 1760.00, 723.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (79, 79, 8223.00, 1259.00, 1144.00, 1742.00, 649.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (80, 80, 8153.00, 1708.00, 1098.00, 1698.00, 517.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (81, 81, 8594.00, 1250.00, 1337.00, 1729.00, 541.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (82, 82, 10799.00, 2081.00, 1353.00, 1837.00, 1219.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (83, 83, 9641.00, 1468.00, 1231.00, 1769.00, 628.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (84, 84, 8893.00, 1760.00, 1205.00, 1661.00, 736.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (85, 85, 8670.00, 1244.00, 1262.00, 1812.00, 789.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (86, 86, 18513.00, 4233.00, 2975.00, 2514.00, 2215.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (87, 87, 14977.00, 2472.00, 1977.00, 2016.00, 1532.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (88, 88, 9904.00, 1412.00, 1361.00, 1620.00, 549.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (89, 89, 9258.00, 1518.00, 1176.00, 1847.00, 517.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (90, 90, 14447.00, 3360.00, 1569.00, 2286.00, 1455.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (91, 91, 8891.00, 1218.00, 1013.00, 1693.00, 645.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (92, 92, 8973.00, 1782.00, 1214.00, 1663.00, 732.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (93, 93, 8477.00, 1693.00, 1310.00, 1751.00, 697.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (94, 94, 9559.00, 1737.00, 1136.00, 1778.00, 546.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (95, 95, 9978.00, 1385.00, 1222.00, 1832.00, 661.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (96, 96, 13099.00, 2329.00, 2299.00, 2134.00, 1748.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (97, 97, 8838.00, 1030.00, 1465.00, 1763.00, 779.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (98, 98, 8031.00, 1230.00, 1196.00, 1630.00, 598.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (99, 99, 8687.00, 1582.00, 1305.00, 1861.00, 658.00, DEFAULT, '2025-04-01', '已发放');
INSERT INTO `薪资` VALUES (100, 100, 8045.00, 1423.00, 1288.00, 1689.00, 727.00, DEFAULT, '2025-04-01', '已发放');

-- ----------------------------
-- Table structure for 角色
-- ----------------------------
DROP TABLE IF EXISTS `角色`;
CREATE TABLE `角色`  (
  `角色ID` int NOT NULL AUTO_INCREMENT,
  `角色名称` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `角色描述` text CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL,
  PRIMARY KEY (`角色ID`) USING BTREE,
  UNIQUE INDEX `角色名称`(`角色名称` ASC) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 5 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of 角色
-- ----------------------------
INSERT INTO `角色` VALUES (1, '系统管理员', '拥有最高权限，可以操作所有表和数据，可以创建和管理用户账户与角色，可以执行任何数据库操作');
INSERT INTO `角色` VALUES (2, '人力资源管理员', '可以查看和修改所有员工信息，可以维护部门结构，不可以管理薪资信息，不能创建或删除数据库对象');
INSERT INTO `角色` VALUES (3, '部门经理', '只能查看和修改自己部门员工的基本信息，可以查看(但不能修改)自己部门员工的薪资，无法查看其他部门的详细信息');
INSERT INTO `角色` VALUES (4, '财务专员', '可以查看和修改所有员工的薪资信息（除了财务部），可以查看但不能修改员工基本信息，可以生成整个公司或按部门的薪资报表，无权修改员工基本信息和部门结构');

-- ----------------------------
-- Table structure for 部门
-- ----------------------------
DROP TABLE IF EXISTS `部门`;
CREATE TABLE `部门`  (
  `部门ID` int NOT NULL AUTO_INCREMENT,
  `部门名称` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  `部门经理ID` int NULL DEFAULT NULL,
  PRIMARY KEY (`部门ID`) USING BTREE,
  INDEX `fk_部门经理`(`部门经理ID` ASC) USING BTREE,
  CONSTRAINT `fk_部门经理` FOREIGN KEY (`部门经理ID`) REFERENCES `员工` (`员工ID`) ON DELETE RESTRICT ON UPDATE RESTRICT
) ENGINE = InnoDB AUTO_INCREMENT = 7 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of 部门
-- ----------------------------
INSERT INTO `部门` VALUES (1, '财务部', 1);
INSERT INTO `部门` VALUES (2, '人力资源部', 16);
INSERT INTO `部门` VALUES (3, '技术部', 31);
INSERT INTO `部门` VALUES (4, '市场部', 51);
INSERT INTO `部门` VALUES (5, '销售部', 66);
INSERT INTO `部门` VALUES (6, '行政部', 86);

-- ----------------------------
-- View structure for 全部员工信息视图
-- ----------------------------
DROP VIEW IF EXISTS `全部员工信息视图`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `全部员工信息视图` AS select `e`.`员工ID` AS `员工ID`,`e`.`姓名` AS `姓名`,`e`.`性别` AS `性别`,`e`.`出生日期` AS `出生日期`,`解密敏感数据`(`e`.`联系电话`) AS `联系电话`,`解密敏感数据`(`e`.`电子邮箱`) AS `电子邮箱`,`e`.`入职日期` AS `入职日期`,`e`.`部门ID` AS `部门ID`,`d`.`部门名称` AS `部门名称`,`e`.`职位` AS `职位`,`e`.`状态` AS `状态` from (`员工` `e` join `部门` `d` on((`e`.`部门ID` = `d`.`部门ID`)));

-- ----------------------------
-- View structure for 薪资信息视图
-- ----------------------------
DROP VIEW IF EXISTS `薪资信息视图`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `薪资信息视图` AS select `s`.`薪资ID` AS `薪资ID`,`s`.`员工ID` AS `员工ID`,`e`.`姓名` AS `姓名`,`d`.`部门ID` AS `部门ID`,`d`.`部门名称` AS `部门名称`,`e`.`职位` AS `职位`,`s`.`基本工资` AS `基本工资`,`s`.`绩效奖金` AS `绩效奖金`,`s`.`福利补贴` AS `福利补贴`,`s`.`社保扣除` AS `社保扣除`,`s`.`个税扣除` AS `个税扣除`,`s`.`实发金额` AS `实发金额`,`s`.`发放年月` AS `发放年月`,`s`.`发放状态` AS `发放状态` from ((`薪资` `s` join `员工` `e` on((`s`.`员工ID` = `e`.`员工ID`))) join `部门` `d` on((`e`.`部门ID` = `d`.`部门ID`)));

-- ----------------------------
-- View structure for 部门1_员工视图
-- ----------------------------
DROP VIEW IF EXISTS `部门1_员工视图`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `部门1_员工视图` AS select `全部员工信息视图`.`员工ID` AS `员工ID`,`全部员工信息视图`.`姓名` AS `姓名`,`全部员工信息视图`.`性别` AS `性别`,`全部员工信息视图`.`出生日期` AS `出生日期`,`全部员工信息视图`.`联系电话` AS `联系电话`,`全部员工信息视图`.`电子邮箱` AS `电子邮箱`,`全部员工信息视图`.`入职日期` AS `入职日期`,`全部员工信息视图`.`部门ID` AS `部门ID`,`全部员工信息视图`.`部门名称` AS `部门名称`,`全部员工信息视图`.`职位` AS `职位`,`全部员工信息视图`.`状态` AS `状态` from `全部员工信息视图` where (`全部员工信息视图`.`部门ID` = 1);

-- ----------------------------
-- View structure for 部门1_薪资视图
-- ----------------------------
DROP VIEW IF EXISTS `部门1_薪资视图`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `部门1_薪资视图` AS select `薪资信息视图`.`薪资ID` AS `薪资ID`,`薪资信息视图`.`员工ID` AS `员工ID`,`薪资信息视图`.`姓名` AS `姓名`,`薪资信息视图`.`部门ID` AS `部门ID`,`薪资信息视图`.`部门名称` AS `部门名称`,`薪资信息视图`.`职位` AS `职位`,`薪资信息视图`.`基本工资` AS `基本工资`,`薪资信息视图`.`绩效奖金` AS `绩效奖金`,`薪资信息视图`.`福利补贴` AS `福利补贴`,`薪资信息视图`.`社保扣除` AS `社保扣除`,`薪资信息视图`.`个税扣除` AS `个税扣除`,`薪资信息视图`.`实发金额` AS `实发金额`,`薪资信息视图`.`发放年月` AS `发放年月`,`薪资信息视图`.`发放状态` AS `发放状态` from `薪资信息视图` where (`薪资信息视图`.`部门ID` = 1);

-- ----------------------------
-- View structure for 部门2_员工视图
-- ----------------------------
DROP VIEW IF EXISTS `部门2_员工视图`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `部门2_员工视图` AS select `全部员工信息视图`.`员工ID` AS `员工ID`,`全部员工信息视图`.`姓名` AS `姓名`,`全部员工信息视图`.`性别` AS `性别`,`全部员工信息视图`.`出生日期` AS `出生日期`,`全部员工信息视图`.`联系电话` AS `联系电话`,`全部员工信息视图`.`电子邮箱` AS `电子邮箱`,`全部员工信息视图`.`入职日期` AS `入职日期`,`全部员工信息视图`.`部门ID` AS `部门ID`,`全部员工信息视图`.`部门名称` AS `部门名称`,`全部员工信息视图`.`职位` AS `职位`,`全部员工信息视图`.`状态` AS `状态` from `全部员工信息视图` where (`全部员工信息视图`.`部门ID` = 2);

-- ----------------------------
-- View structure for 部门2_薪资视图
-- ----------------------------
DROP VIEW IF EXISTS `部门2_薪资视图`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `部门2_薪资视图` AS select `薪资信息视图`.`薪资ID` AS `薪资ID`,`薪资信息视图`.`员工ID` AS `员工ID`,`薪资信息视图`.`姓名` AS `姓名`,`薪资信息视图`.`部门ID` AS `部门ID`,`薪资信息视图`.`部门名称` AS `部门名称`,`薪资信息视图`.`职位` AS `职位`,`薪资信息视图`.`基本工资` AS `基本工资`,`薪资信息视图`.`绩效奖金` AS `绩效奖金`,`薪资信息视图`.`福利补贴` AS `福利补贴`,`薪资信息视图`.`社保扣除` AS `社保扣除`,`薪资信息视图`.`个税扣除` AS `个税扣除`,`薪资信息视图`.`实发金额` AS `实发金额`,`薪资信息视图`.`发放年月` AS `发放年月`,`薪资信息视图`.`发放状态` AS `发放状态` from `薪资信息视图` where (`薪资信息视图`.`部门ID` = 2);

-- ----------------------------
-- View structure for 部门3_员工视图
-- ----------------------------
DROP VIEW IF EXISTS `部门3_员工视图`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `部门3_员工视图` AS select `全部员工信息视图`.`员工ID` AS `员工ID`,`全部员工信息视图`.`姓名` AS `姓名`,`全部员工信息视图`.`性别` AS `性别`,`全部员工信息视图`.`出生日期` AS `出生日期`,`全部员工信息视图`.`联系电话` AS `联系电话`,`全部员工信息视图`.`电子邮箱` AS `电子邮箱`,`全部员工信息视图`.`入职日期` AS `入职日期`,`全部员工信息视图`.`部门ID` AS `部门ID`,`全部员工信息视图`.`部门名称` AS `部门名称`,`全部员工信息视图`.`职位` AS `职位`,`全部员工信息视图`.`状态` AS `状态` from `全部员工信息视图` where (`全部员工信息视图`.`部门ID` = 3);

-- ----------------------------
-- View structure for 部门3_薪资视图
-- ----------------------------
DROP VIEW IF EXISTS `部门3_薪资视图`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `部门3_薪资视图` AS select `薪资信息视图`.`薪资ID` AS `薪资ID`,`薪资信息视图`.`员工ID` AS `员工ID`,`薪资信息视图`.`姓名` AS `姓名`,`薪资信息视图`.`部门ID` AS `部门ID`,`薪资信息视图`.`部门名称` AS `部门名称`,`薪资信息视图`.`职位` AS `职位`,`薪资信息视图`.`基本工资` AS `基本工资`,`薪资信息视图`.`绩效奖金` AS `绩效奖金`,`薪资信息视图`.`福利补贴` AS `福利补贴`,`薪资信息视图`.`社保扣除` AS `社保扣除`,`薪资信息视图`.`个税扣除` AS `个税扣除`,`薪资信息视图`.`实发金额` AS `实发金额`,`薪资信息视图`.`发放年月` AS `发放年月`,`薪资信息视图`.`发放状态` AS `发放状态` from `薪资信息视图` where (`薪资信息视图`.`部门ID` = 3);

-- ----------------------------
-- View structure for 部门4_员工视图
-- ----------------------------
DROP VIEW IF EXISTS `部门4_员工视图`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `部门4_员工视图` AS select `全部员工信息视图`.`员工ID` AS `员工ID`,`全部员工信息视图`.`姓名` AS `姓名`,`全部员工信息视图`.`性别` AS `性别`,`全部员工信息视图`.`出生日期` AS `出生日期`,`全部员工信息视图`.`联系电话` AS `联系电话`,`全部员工信息视图`.`电子邮箱` AS `电子邮箱`,`全部员工信息视图`.`入职日期` AS `入职日期`,`全部员工信息视图`.`部门ID` AS `部门ID`,`全部员工信息视图`.`部门名称` AS `部门名称`,`全部员工信息视图`.`职位` AS `职位`,`全部员工信息视图`.`状态` AS `状态` from `全部员工信息视图` where (`全部员工信息视图`.`部门ID` = 4);

-- ----------------------------
-- View structure for 部门4_薪资视图
-- ----------------------------
DROP VIEW IF EXISTS `部门4_薪资视图`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `部门4_薪资视图` AS select `薪资信息视图`.`薪资ID` AS `薪资ID`,`薪资信息视图`.`员工ID` AS `员工ID`,`薪资信息视图`.`姓名` AS `姓名`,`薪资信息视图`.`部门ID` AS `部门ID`,`薪资信息视图`.`部门名称` AS `部门名称`,`薪资信息视图`.`职位` AS `职位`,`薪资信息视图`.`基本工资` AS `基本工资`,`薪资信息视图`.`绩效奖金` AS `绩效奖金`,`薪资信息视图`.`福利补贴` AS `福利补贴`,`薪资信息视图`.`社保扣除` AS `社保扣除`,`薪资信息视图`.`个税扣除` AS `个税扣除`,`薪资信息视图`.`实发金额` AS `实发金额`,`薪资信息视图`.`发放年月` AS `发放年月`,`薪资信息视图`.`发放状态` AS `发放状态` from `薪资信息视图` where (`薪资信息视图`.`部门ID` = 4);

-- ----------------------------
-- View structure for 部门5_员工视图
-- ----------------------------
DROP VIEW IF EXISTS `部门5_员工视图`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `部门5_员工视图` AS select `全部员工信息视图`.`员工ID` AS `员工ID`,`全部员工信息视图`.`姓名` AS `姓名`,`全部员工信息视图`.`性别` AS `性别`,`全部员工信息视图`.`出生日期` AS `出生日期`,`全部员工信息视图`.`联系电话` AS `联系电话`,`全部员工信息视图`.`电子邮箱` AS `电子邮箱`,`全部员工信息视图`.`入职日期` AS `入职日期`,`全部员工信息视图`.`部门ID` AS `部门ID`,`全部员工信息视图`.`部门名称` AS `部门名称`,`全部员工信息视图`.`职位` AS `职位`,`全部员工信息视图`.`状态` AS `状态` from `全部员工信息视图` where (`全部员工信息视图`.`部门ID` = 5);

-- ----------------------------
-- View structure for 部门5_薪资视图
-- ----------------------------
DROP VIEW IF EXISTS `部门5_薪资视图`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `部门5_薪资视图` AS select `薪资信息视图`.`薪资ID` AS `薪资ID`,`薪资信息视图`.`员工ID` AS `员工ID`,`薪资信息视图`.`姓名` AS `姓名`,`薪资信息视图`.`部门ID` AS `部门ID`,`薪资信息视图`.`部门名称` AS `部门名称`,`薪资信息视图`.`职位` AS `职位`,`薪资信息视图`.`基本工资` AS `基本工资`,`薪资信息视图`.`绩效奖金` AS `绩效奖金`,`薪资信息视图`.`福利补贴` AS `福利补贴`,`薪资信息视图`.`社保扣除` AS `社保扣除`,`薪资信息视图`.`个税扣除` AS `个税扣除`,`薪资信息视图`.`实发金额` AS `实发金额`,`薪资信息视图`.`发放年月` AS `发放年月`,`薪资信息视图`.`发放状态` AS `发放状态` from `薪资信息视图` where (`薪资信息视图`.`部门ID` = 5);

-- ----------------------------
-- View structure for 部门6_员工视图
-- ----------------------------
DROP VIEW IF EXISTS `部门6_员工视图`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `部门6_员工视图` AS select `全部员工信息视图`.`员工ID` AS `员工ID`,`全部员工信息视图`.`姓名` AS `姓名`,`全部员工信息视图`.`性别` AS `性别`,`全部员工信息视图`.`出生日期` AS `出生日期`,`全部员工信息视图`.`联系电话` AS `联系电话`,`全部员工信息视图`.`电子邮箱` AS `电子邮箱`,`全部员工信息视图`.`入职日期` AS `入职日期`,`全部员工信息视图`.`部门ID` AS `部门ID`,`全部员工信息视图`.`部门名称` AS `部门名称`,`全部员工信息视图`.`职位` AS `职位`,`全部员工信息视图`.`状态` AS `状态` from `全部员工信息视图` where (`全部员工信息视图`.`部门ID` = 6);

-- ----------------------------
-- View structure for 部门6_薪资视图
-- ----------------------------
DROP VIEW IF EXISTS `部门6_薪资视图`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `部门6_薪资视图` AS select `薪资信息视图`.`薪资ID` AS `薪资ID`,`薪资信息视图`.`员工ID` AS `员工ID`,`薪资信息视图`.`姓名` AS `姓名`,`薪资信息视图`.`部门ID` AS `部门ID`,`薪资信息视图`.`部门名称` AS `部门名称`,`薪资信息视图`.`职位` AS `职位`,`薪资信息视图`.`基本工资` AS `基本工资`,`薪资信息视图`.`绩效奖金` AS `绩效奖金`,`薪资信息视图`.`福利补贴` AS `福利补贴`,`薪资信息视图`.`社保扣除` AS `社保扣除`,`薪资信息视图`.`个税扣除` AS `个税扣除`,`薪资信息视图`.`实发金额` AS `实发金额`,`薪资信息视图`.`发放年月` AS `发放年月`,`薪资信息视图`.`发放状态` AS `发放状态` from `薪资信息视图` where (`薪资信息视图`.`部门ID` = 6);

-- ----------------------------
-- View structure for 非财务部薪资视图
-- ----------------------------
DROP VIEW IF EXISTS `非财务部薪资视图`;
CREATE ALGORITHM = UNDEFINED SQL SECURITY DEFINER VIEW `非财务部薪资视图` AS select `s`.`薪资ID` AS `薪资ID`,`s`.`员工ID` AS `员工ID`,`e`.`姓名` AS `姓名`,`d`.`部门ID` AS `部门ID`,`d`.`部门名称` AS `部门名称`,`e`.`职位` AS `职位`,`s`.`基本工资` AS `基本工资`,`s`.`绩效奖金` AS `绩效奖金`,`s`.`福利补贴` AS `福利补贴`,`s`.`社保扣除` AS `社保扣除`,`s`.`个税扣除` AS `个税扣除`,`s`.`实发金额` AS `实发金额`,`s`.`发放年月` AS `发放年月`,`s`.`发放状态` AS `发放状态` from ((`薪资` `s` join `员工` `e` on((`s`.`员工ID` = `e`.`员工ID`))) join `部门` `d` on((`e`.`部门ID` = `d`.`部门ID`))) where (`d`.`部门名称` <> '财务部');

-- ----------------------------
-- Procedure structure for 创建所有MySQL用户
-- ----------------------------
DROP PROCEDURE IF EXISTS `创建所有MySQL用户`;
delimiter ;;
CREATE PROCEDURE `创建所有MySQL用户`()
BEGIN
    DECLARE done INT DEFAULT FALSE;
    DECLARE 用户名称 VARCHAR(50);
    DECLARE 加密密码 VARBINARY(256);
    DECLARE 原始密码 VARCHAR(100);
    DECLARE 用户角色ID INT;
    DECLARE 用户员工ID INT;
    DECLARE 用户部门ID INT;
    
    -- 定义游标，用于遍历所有用户
    DECLARE user_cursor CURSOR FOR 
        SELECT u.用户名, u.密码, ur.角色ID, u.员工ID
        FROM 用户 u
        JOIN 用户角色 ur ON u.用户ID = ur.用户ID;
    
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
    
    -- 遍历每个用户
    OPEN user_cursor;
    
    read_loop: LOOP
        FETCH user_cursor INTO 用户名称, 加密密码, 用户角色ID, 用户员工ID;
        IF done THEN
            LEAVE read_loop;
        END IF;
        
        -- 解密获取原始密码
        SET 原始密码 = 解密密码(加密密码);
        
        -- 如果用户已存在则先删除
        SET @sql = CONCAT('DROP USER IF EXISTS \'', 用户名称, '\'@\'localhost\'');
        PREPARE stmt FROM @sql;
        EXECUTE stmt;
        DEALLOCATE PREPARE stmt;
        
        -- 创建新用户，使用解密后的原始密码
        SET @sql = CONCAT('CREATE USER \'', 用户名称, '\'@\'localhost\' IDENTIFIED BY \'', 原始密码, '\'');
        PREPARE stmt FROM @sql;
        EXECUTE stmt;
        DEALLOCATE PREPARE stmt;
        
        -- 根据角色分配不同的权限
        CASE 用户角色ID
            WHEN 1 THEN  -- 系统管理员
                SET @sql = CONCAT('GRANT ALL PRIVILEGES ON 企业人事管理系统.* TO \'', 
                                  用户名称, '\'@\'localhost\'');
                
            WHEN 2 THEN  -- 人力资源管理员
                SET @sql = CONCAT('GRANT SELECT, INSERT, UPDATE, DELETE ON 企业人事管理系统.员工 TO \'', 
                                  用户名称, '\'@\'localhost\'');
                PREPARE stmt FROM @sql;
                EXECUTE stmt;
                DEALLOCATE PREPARE stmt;
                
                SET @sql = CONCAT('GRANT SELECT ON 企业人事管理系统.部门 TO \'', 
                                  用户名称, '\'@\'localhost\'');
                
            WHEN 3 THEN  -- 部门经理
                -- 获取部门经理所在的部门ID
                SELECT e.部门ID INTO 用户部门ID
                FROM 员工 e
                WHERE e.员工ID = 用户员工ID;
                
                -- 创建该部门的专用视图
                SET @sql = CONCAT('CREATE OR REPLACE VIEW 部门', 用户部门ID, '_员工视图 AS ',
                                  'SELECT * FROM 全部员工信息视图 WHERE 部门ID = ', 用户部门ID);
                PREPARE stmt FROM @sql;
                EXECUTE stmt;
                DEALLOCATE PREPARE stmt;
                
                SET @sql = CONCAT('CREATE OR REPLACE VIEW 部门', 用户部门ID, '_薪资视图 AS ',
                                  'SELECT * FROM 薪资信息视图 WHERE 部门ID = ', 用户部门ID);
                PREPARE stmt FROM @sql;
                EXECUTE stmt;
                DEALLOCATE PREPARE stmt;
                
                -- 授予该部门视图的访问权限
                SET @sql = CONCAT('GRANT SELECT ON 企业人事管理系统.部门', 用户部门ID, '_员工视图 TO \'', 
                                  用户名称, '\'@\'localhost\'');
                PREPARE stmt FROM @sql;
                EXECUTE stmt;
                DEALLOCATE PREPARE stmt;
                
                SET @sql = CONCAT('GRANT SELECT ON 企业人事管理系统.部门', 用户部门ID, '_薪资视图 TO \'', 
                                  用户名称, '\'@\'localhost\'');
                
            WHEN 4 THEN  -- 财务专员
                SET @sql = CONCAT('GRANT SELECT, UPDATE ON 企业人事管理系统.薪资 TO \'', 
                                  用户名称, '\'@\'localhost\'');
                PREPARE stmt FROM @sql;
                EXECUTE stmt;
                DEALLOCATE PREPARE stmt;
                
                SET @sql = CONCAT('GRANT SELECT ON 企业人事管理系统.非财务部薪资视图 TO \'', 
                                  用户名称, '\'@\'localhost\'');
                PREPARE stmt FROM @sql;
                EXECUTE stmt;
                DEALLOCATE PREPARE stmt;
                
        END CASE;
        
        PREPARE stmt FROM @sql;
        EXECUTE stmt;
        DEALLOCATE PREPARE stmt;
    END LOOP;
    
    CLOSE user_cursor;
    
    -- 刷新权限
    FLUSH PRIVILEGES;
END
;;
delimiter ;

-- ----------------------------
-- Function structure for 加密密码
-- ----------------------------
DROP FUNCTION IF EXISTS `加密密码`;
delimiter ;;
CREATE FUNCTION `加密密码`(密码 VARCHAR(100))
 RETURNS varbinary(256)
  DETERMINISTIC
BEGIN
    DECLARE 密钥 VARBINARY(256);
    SELECT 密钥值 INTO 密钥 FROM 系统密钥 WHERE 密钥名称 = 'PASSWORD_KEY' AND 状态 = '激活' LIMIT 1;
    RETURN AES_ENCRYPT(密码, 密钥);
END
;;
delimiter ;

-- ----------------------------
-- Function structure for 加密敏感数据
-- ----------------------------
DROP FUNCTION IF EXISTS `加密敏感数据`;
delimiter ;;
CREATE FUNCTION `加密敏感数据`(数据 VARCHAR(200))
 RETURNS varbinary(256)
  DETERMINISTIC
BEGIN
    DECLARE 密钥 VARBINARY(256);
    SELECT 密钥值 INTO 密钥 FROM 系统密钥 WHERE 密钥名称 = 'SENSITIVE_DATA_KEY' AND 状态 = '激活' LIMIT 1;
    RETURN AES_ENCRYPT(数据, 密钥);
END
;;
delimiter ;

-- ----------------------------
-- Function structure for 获取当前用户角色
-- ----------------------------
DROP FUNCTION IF EXISTS `获取当前用户角色`;
delimiter ;;
CREATE FUNCTION `获取当前用户角色`()
 RETURNS int
  DETERMINISTIC
BEGIN
    DECLARE 角色ID INT;
    
    SELECT r.角色ID INTO 角色ID
    FROM 用户 u
    JOIN 用户角色 ur ON u.用户ID = ur.用户ID
    JOIN 角色 r ON ur.角色ID = r.角色ID
    WHERE u.用户名 = SUBSTRING_INDEX(USER(), '@', 1)
    LIMIT 1;
    
    RETURN IFNULL(角色ID, 0);
END
;;
delimiter ;

-- ----------------------------
-- Function structure for 获取当前用户部门
-- ----------------------------
DROP FUNCTION IF EXISTS `获取当前用户部门`;
delimiter ;;
CREATE FUNCTION `获取当前用户部门`()
 RETURNS int
  DETERMINISTIC
BEGIN
    DECLARE 部门ID INT;
    
    SELECT e.部门ID INTO 部门ID
    FROM 用户 u
    JOIN 员工 e ON u.员工ID = e.员工ID
    WHERE u.用户名 = SUBSTRING_INDEX(USER(), '@', 1)
    LIMIT 1;
    
    RETURN IFNULL(部门ID, 0);
END
;;
delimiter ;

-- ----------------------------
-- Function structure for 解密密码
-- ----------------------------
DROP FUNCTION IF EXISTS `解密密码`;
delimiter ;;
CREATE FUNCTION `解密密码`(加密数据 VARBINARY(256))
 RETURNS varchar(100) CHARSET utf8mb4 COLLATE utf8mb4_unicode_ci
  DETERMINISTIC
BEGIN
    DECLARE 密钥 VARBINARY(256);
    SELECT 密钥值 INTO 密钥 FROM 系统密钥 WHERE 密钥名称 = 'PASSWORD_KEY' AND 状态 = '激活' LIMIT 1;
    RETURN AES_DECRYPT(加密数据, 密钥);
END
;;
delimiter ;

-- ----------------------------
-- Function structure for 解密敏感数据
-- ----------------------------
DROP FUNCTION IF EXISTS `解密敏感数据`;
delimiter ;;
CREATE FUNCTION `解密敏感数据`(加密数据 VARBINARY(256))
 RETURNS varchar(200) CHARSET utf8mb4 COLLATE utf8mb4_unicode_ci
  DETERMINISTIC
BEGIN
    DECLARE 密钥 VARBINARY(256);
    SELECT 密钥值 INTO 密钥 FROM 系统密钥 WHERE 密钥名称 = 'SENSITIVE_DATA_KEY' AND 状态 = '激活' LIMIT 1;
    RETURN AES_DECRYPT(加密数据, 密钥);
END
;;
delimiter ;

-- ----------------------------
-- Triggers structure for table 员工
-- ----------------------------
DROP TRIGGER IF EXISTS `员工更新权限检查`;
delimiter ;;
CREATE TRIGGER `员工更新权限检查` BEFORE UPDATE ON `员工` FOR EACH ROW BEGIN
    DECLARE 当前角色 INT;
    DECLARE 当前部门 INT;
    DECLARE 是否有权限 BOOLEAN DEFAULT FALSE;
    
    -- 获取当前用户角色和部门
    SET 当前角色 = 获取当前用户角色();
    SET 当前部门 = 获取当前用户部门();
    
    CASE 当前角色
        WHEN 1 THEN 
            -- 系统管理员有所有权限
            SET 是否有权限 = TRUE;
        WHEN 2 THEN 
            -- 人力资源管理员可以修改所有员工，但不能修改自己
            IF OLD.员工ID = (SELECT 员工ID FROM 用户 WHERE 用户名 = SUBSTRING_INDEX(USER(), '@', 1)) THEN
                SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = '人力资源管理员不能修改自己的信息';
            ELSE
                SET 是否有权限 = TRUE;
            END IF;
        WHEN 3 THEN 
            -- 部门经理只能修改自己部门的员工
            SET 是否有权限 = (OLD.部门ID = 当前部门);
        ELSE
            SET 是否有权限 = FALSE;
    END CASE;
    
    IF NOT 是否有权限 THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = '您没有权限修改此员工信息';
    END IF;
    
    -- 权限检查通过后，处理敏感数据加密
    -- 检查联系电话是否为明文格式（尝试转换为字符串）
    IF NEW.联系电话 IS NOT NULL AND NEW.联系电话 != OLD.联系电话 THEN
        -- 尝试判断是否为明文输入（非二进制格式）
        IF NOT ISNULL(CONVERT(NEW.联系电话 USING utf8mb4)) THEN
            -- 明文输入，需要加密
            SET NEW.联系电话 = 加密敏感数据(CONVERT(NEW.联系电话 USING utf8mb4));
        END IF;
    END IF;
    
    -- 检查电子邮箱是否为明文格式
    IF NEW.电子邮箱 IS NOT NULL AND NEW.电子邮箱 != OLD.电子邮箱 THEN
        -- 尝试判断是否为明文输入（非二进制格式）
        IF NOT ISNULL(CONVERT(NEW.电子邮箱 USING utf8mb4)) THEN
            -- 明文输入，需要加密
            SET NEW.电子邮箱 = 加密敏感数据(CONVERT(NEW.电子邮箱 USING utf8mb4));
        END IF;
    END IF;
END
;;
delimiter ;

-- ----------------------------
-- Triggers structure for table 薪资
-- ----------------------------
DROP TRIGGER IF EXISTS `薪资更新权限检查`;
delimiter ;;
CREATE TRIGGER `薪资更新权限检查` BEFORE UPDATE ON `薪资` FOR EACH ROW BEGIN
    DECLARE 当前角色 INT;
    DECLARE 目标部门名称 VARCHAR(50);
    DECLARE 是否有权限 BOOLEAN DEFAULT FALSE;
    
    -- 获取当前用户角色
    SET 当前角色 = 获取当前用户角色();
    
    -- 获取被修改员工的部门名称
    SELECT d.部门名称 INTO 目标部门名称
    FROM 员工 e
    JOIN 部门 d ON e.部门ID = d.部门ID
    WHERE e.员工ID = NEW.员工ID;
    
    CASE 当前角色
        WHEN 1 THEN 
            -- 系统管理员有所有权限
            SET 是否有权限 = TRUE;
        WHEN 4 THEN 
            -- 财务专员不能修改财务部员工薪资
            SET 是否有权限 = (目标部门名称 != '财务部');
        ELSE
            SET 是否有权限 = FALSE;
    END CASE;
    
    IF NOT 是否有权限 THEN
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = '您没有权限修改此员工薪资信息';
    END IF;
END
;;
delimiter ;

SET FOREIGN_KEY_CHECKS = 1;
